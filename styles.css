/* v7_dancing_fixed: Dancing Script + smaller auto-fit photo */
:root{
  --bg1:#fff7fb; --bg2:#ffeef6; --bg3:#fff7fb;
  --text:#4a3b47; --muted:#8a6c7d;
  --accent:#ffb3cf; --accent2:#ffd6e7; --accent3:#ffcfe1;
  --shadow:0 18px 48px rgba(215,140,175,.35);
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%}
body{
  margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
  color:var(--text);
  background:
    radial-gradient(1200px 800px at -10% -10%, #ffe7f2 0%, transparent 60%),
    radial-gradient(1200px 800px at 110% 10%, #ffe7f2 0%, transparent 60%),
    linear-gradient(180deg, var(--bg1), var(--bg2) 60%, var(--bg3) 100%);
  overflow-x:hidden;
}

/* Gate */
.gate{ position:fixed; inset:0; display:grid; grid-template-rows: 1fr auto 2fr; align-items:start; justify-items:center;
  background:linear-gradient(180deg, #fff7fb, rgba(255,238,246,.96)); z-index:9999; overflow:hidden; padding:16px }
.gate-bg .heart{ position:fixed; width:22px; height:22px; background:var(--accent); transform: rotate(45deg); opacity:.18; border-radius:4px; animation: drift 12s linear infinite }
.gate-bg .heart::before, .gate-bg .heart::after{ content:""; position:absolute; width:22px; height:22px; background:var(--accent); border-radius:50% }
.gate-bg .heart::before{left:-11px}.gate-bg .heart::after{top:-11px}
.h1{left:12%; top:82%; animation-delay:0s}.h2{left:72%; top:86%; animation-delay:2s}.h3{left:42%; top:90%; animation-delay:4s}.h4{left:26%; top:88%; animation-delay:1s}.h5{left:86%; top:84%; animation-delay:3s}
@keyframes drift{from{transform:translateY(0) rotate(45deg)} to{transform:translateY(-140vh) rotate(45deg)}}
.gate-card{ grid-row:2; width:min(480px,94vw); background:#fff; border:1px solid #ffd6e7; border-radius:20px; box-shadow:var(--shadow); padding:20px 18px 16px; text-align:center; animation:pop-in .6s ease-out both; position:relative }
@keyframes pop-in{0%{transform:scale(.96);opacity:0}100%{transform:scale(1);opacity:1}}
.lock{display:grid; place-items:center; margin:0 auto 4px; width:84px; height:84px}
.lock-svg{width:84px; height:84px}
.lock .body{fill:url(#grad); filter:drop-shadow(0 6px 10px rgba(215,140,175,.25))}
.lock .shackle{stroke:var(--accent); stroke-width:6; stroke-linecap:round; filter:drop-shadow(0 2px 0 rgba(215,140,175,.25))}
.lock .key,.lock .key-slot{fill:#74384f}
.unlocked .body{animation: pulse .8s ease both}.unlocked .shackle{animation: open .8s ease forwards}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.06)}100%{transform:scale(1)}}
@keyframes open{0%{stroke-dasharray:0 200; transform:translateY(0)}100%{stroke-dasharray:200 0; transform:translateY(-6px)}}
.gate-form{display:grid; grid-template-columns:1fr auto auto; gap:8px; margin:10px 0 4px; align-items:center}
.gate-form input{ padding:12px; border-radius:12px; border:1px solid #ffd3e4; background:#fff; outline:none; transition:.2s border-color,.2s box-shadow; font-size:16px }
.gate-form input:focus{border-color:var(--accent); box-shadow:0 0 0 6px rgba(255,179,207,.35)}
.btn{ background:var(--accent); color:#4a3b47; border:none; border-radius:12px; padding:12px 14px; font-weight:800; box-shadow:0 10px 18px rgba(215,140,175,.25); cursor:pointer }
.btn.eye{background:#fff; border:1px solid #ffd6e7}
.btn:active{transform:scale(.98)}
.gate-msg{height:18px; color:#b22b56; font-weight:700; margin:4px 0 0}
.muted{color:var(--muted); margin:0 0 6px}

.wrap{ min-height:100%; display:grid; place-items:center; padding: clamp(14px, 3vw, 28px) }
.card{ width:min(720px, 100%); border-radius:22px; background:linear-gradient(180deg, rgba(255,255,255,.90), rgba(255,255,255,.70)); border:1px solid #ffd6e7; box-shadow:var(--shadow); position:relative; overflow:hidden; padding: clamp(16px, 4vw, 28px); animation: pop-in .8s ease-out both }
.badge{ position:absolute; top:12px; right:12px; background:linear-gradient(180deg, var(--accent), var(--accent2)); color:#4a3b47; padding:8px 12px; border-radius:999px; font-weight:800; font-size:12.5px; box-shadow:0 10px 18px rgba(215,140,175,.25); animation: float 4s ease-in-out infinite }
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
.title{ font-family: Arial, Helvetica, sans-serif; font-weight:700; letter-spacing:.5px;
  font-size:clamp(26px, 7vw, 38px); margin: 8px 0 4px; text-align:center; animation: slide-down .9s ease-out both .1s; color:#8f3a5e }
@keyframes slide-down{0%{transform:translateY(-8px);opacity:0}100%{transform:translateY(0);opacity:1}}
.subtitle{ font-family: Arial, Helvetica, sans-serif; text-align:center; color:#a25a7a; font-size:clamp(14px, 3.6vw, 18px); animation: fade-in .9s ease-out both .2s }

/* Photo frame now auto-fit with smaller width */
.photo-box{
  position:relative; width:min(380px, 80vw); /* smaller than before */
  margin: clamp(14px, 3vw, 22px) auto;
  border-radius:18px; overflow:hidden;
  border:2px solid #ffcfe1;
  box-shadow:0 12px 28px rgba(215,140,175,.25), 0 0 0 0 rgba(255,179,207,.0);
  background:#ffeef6;
  animation: fade-in .9s ease-out both .25s, glow 3s ease-in-out infinite;
}
@keyframes glow{
  0%,100%{box-shadow:0 12px 28px rgba(215,140,175,.25), 0 0 0 0 rgba(255,179,207,.0)}
  50%{box-shadow:0 12px 28px rgba(215,140,175,.25), 0 0 14px 2px rgba(255,179,207,.45)}
}
.photo-box img{width:100%; height:auto; object-fit:contain; display:block}
.deco{ position:absolute; width:58px; height:58px; opacity:.92 }
.deco-tl{ left:-6px; top:-6px }
.deco-tr{ right:-6px; top:-6px; transform: scaleX(-1) }
.deco-bl{ left:-6px; bottom:-6px; transform: scaleY(-1) }
.deco-br{ right:-6px; bottom:-6px; transform: scale(-1,-1) }

/* Flowers */
.flowers{ position:absolute; inset:0; pointer-events:none; overflow:hidden }
.flower{ position:absolute; font-size:16px; opacity:.9; animation: flower-fall var(--dur) linear forwards; }
.flower.fade{ animation: flower-fade .6s ease forwards }
@keyframes flower-fall{
  from{ transform: translateY(-20%); opacity:0 }
  10%{ opacity:.95 }
  to{ transform: translateY(140%); opacity:0 }
}
@keyframes flower-fade{ to{ opacity:0; transform: translateY(10%) scale(.85) } }

/* Message with Dancing Script */
.message{ font-family: Arial, Helvetica, sans-serif; color:#7a2f4e;
  text-align:center; font-size:clamp(14px, 3.6vw, 18px); line-height:1.7; white-space:pre-wrap;
  margin: 8px auto 12px; max-width: 62ch; }
.message.enter{ animation: msg-enter .8s ease both }
.message.flash{ animation: flash .6s ease both }
@keyframes msg-enter{ from{opacity:0; transform: translateY(8px)} to{opacity:1; transform: translateY(0)} }
@keyframes flash{ from{filter:brightness(1)} 50%{filter:brightness(1.12)} to{filter:brightness(1)} }

.sig{ text-align:center; font-weight:700; margin-top:6px }
.date{ text-align:center; font-size:13px; color:#8a6c7d; margin-top:2px }

/* Balloons */
.balloons{position:absolute; inset:0; overflow:hidden; pointer-events:none; z-index:0}
.balloon{ position:absolute; bottom:-20%; width:26px; height:34px; border-radius:50% 50% 45% 45%; background:var(--accent); opacity:.20; animation: rise var(--dur) linear infinite, wobble 6s ease-in-out infinite }
.balloon::after{content:""; position:absolute; bottom:-12px; left:50%; width:2px; height:18px; background:var(--accent3); transform:translateX(-50%)}
@keyframes rise{from{transform:translateY(0)} to{transform:translateY(-140%)}}
@keyframes wobble{0%,100%{transform:translateX(0)}50%{transform:translateX(10px)}}

/* Plushies */
.plush{ position:absolute; bottom:-6px; width:min(180px, 32vw); filter: drop-shadow(0 10px 18px rgba(215,140,175,.25)) }
.trex{ left:-10px; transform-origin: bottom left; animation: bob 3.6s ease-in-out infinite }
.bear{ right:-10px; transform-origin: bottom right; animation: bob2 3.8s ease-in-out infinite }
@keyframes bob{0%,100%{transform:translateY(0) rotate(-2deg)}50%{transform:translateY(-6px) rotate(1deg)}}
@keyframes bob2{0%,100%{transform:translateY(0) rotate(2deg)}50%{transform:translateY(-6px) rotate(-1deg)}}

/* Confetti */
.confetti{position:fixed; inset:0; pointer-events:none; z-index:20}

.actions{ display:flex; gap:10px; justify-content:center; margin-top:12px; flex-wrap:wrap }
.btn{ background:var(--accent); color:#4a3b47; border:none; border-radius:12px; padding:12px 14px; font-weight:800; box-shadow:0 10px 18px rgba(215,140,175,.25); cursor:pointer }
.btn.secondary{background:#fff; border:1px solid #ffd6e7}
.btn:active{transform:scale(.98)}

@keyframes fade-in{from{opacity:0}to{opacity:1}}


/* === OVERRIDE (force default body font; keep title in Dancing Script) === */
:root{
  --body-font: Arial, Helvetica, sans-serif;
  --title-font: 'Dancing Script', cursive;
}
html, body, p, .message, .subtitle, .sig, .date, .actions .btn, .badge, input, button, label {
  font-family: var(--body-font) !important;
}
.title, h1.title, #ucapan {
  font-family: var(--title-font) !important;
}


/* === Scroll reveal effect === */
.scroll-anim{opacity:0; transform:translateY(30px); transition:opacity .8s ease, transform .8s ease}
.scroll-anim.show{opacity:1; transform:translateY(0)}
@media (prefers-reduced-motion: reduce){
  .scroll-anim{opacity:1; transform:none; transition:none}
}


/* === Birthday cake overlay === */
.cake-overlay{ position:fixed; inset:0; background:rgba(255,224,239,.65); backdrop-filter: blur(2px);
  display:none; place-items:center; z-index:9999; }
.cake-overlay.show{ display:grid; animation: overlay-in .28s ease both }
@keyframes overlay-in{ from{opacity:0} to{opacity:1} }

.cake-wrap{ text-align:center; animation: cake-pop .36s ease-out both }
@keyframes cake-pop{ from{ transform:scale(.92); opacity:0 } to{ transform:scale(1); opacity:1 } }

.cake{ position:relative; width:min(180px, 60vw); height:170px; margin:auto; }
.plate{ position:absolute; bottom:0; left:50%; transform:translateX(-50%);
  width: 200px; max-width:80vw; height: 16px; background: #ffe4ef; border-radius:999px; box-shadow: inset 0 4px 8px rgba(255,179,207,.45) }
.cake-layer{ position:absolute; left:50%; transform:translateX(-50%); background: #ffd1e3; border:2px solid #ffb3cf; border-radius:16px; box-shadow:0 8px 18px rgba(215,140,175,.25) }
.cake-layer.bottom{ bottom:16px; width: 180px; height: 52px }
.cake-layer.mid{ bottom:60px; width: 150px; height: 46px; background:#ffe0ec }
.cake-layer.top{ bottom:100px; width: 120px; height: 38px; background:#fff0f6 }

/* Drips */
.cake-layer.top::after, .cake-layer.mid::after{
  content:""; position:absolute; left:0; right:0; height:16px; bottom:-8px;
  background: repeating-linear-gradient(90deg, #ffcfe1 0 10px, transparent 10px 20px);
  mask: radial-gradient(10px 8px at 10px 8px,#000 98%,transparent 100%) 0 0/20px 100% repeat-x;
  -webkit-mask: radial-gradient(10px 8px at 10px 8px,#000 98%,transparent 100%) 0 0/20px 100% repeat-x;
  opacity:.9;
}

/* Sprinkles */
.sprinkle{ position:absolute; width:8px; height:3px; background:#ff9ec3; border-radius:2px; transform:rotate(25deg) }
.s1{ top:118px; left:72px } .s2{ top:132px; left:104px } .s3{ top:84px; left:54px } .s4{ top:68px; left:126px }

/* Candle */
.candle{ position:absolute; width:12px; height:36px; background:#ffd1e3; border:2px solid #ffb3cf;
  left:50%; transform:translateX(-50%); bottom:136px; border-radius:4px }
.candle::after{ content:""; position:absolute; inset:2px; background: repeating-linear-gradient(180deg,#ffb3cf 0 6px, transparent 6px 12px) }
.flame{ position:absolute; left:50%; transform:translateX(-50%); bottom:40px; width:14px; height:20px;
  background: radial-gradient(ellipse at center, #fff4c7 0%, #ffd86d 55%, #ff9b3d 100%);
  border-radius: 50% 50% 50% 50%/60% 60% 40% 40%;
  box-shadow: 0 0 14px 4px rgba(255,180,80,.55), 0 0 28px 10px rgba(255,180,80,.35);
  animation: flicker .9s infinite;
}
@keyframes flicker{
  0%,100%{ transform:translateX(-50%) scale(1); opacity:.95 }
  50%{ transform:translateX(-50%) scale(1.07); opacity:1 }
}

/* Blow out */
.cake-overlay.blow .flame{ animation: blow .25s ease forwards }
@keyframes blow{ to{ opacity:0; filter:blur(2px); transform:translateX(-50%) translateY(-6px) scale(.8) } }
.cake-overlay.blow .cake-wrap{ animation: cake-fade .35s ease .18s forwards }
@keyframes cake-fade{ to{ opacity:0; transform: scale(.95) } }

.tip{ margin-top:10px; font-weight:700; color:#8a5c73; background:#fff; border:1px solid #ffd6e7; padding:8px 12px; border-radius:999px; display:inline-block; }
